import { Sticker } from "./Sticker";
import { Cube } from "./Cube";

export class Renderer2D {
    private entryPoint: HTMLElement;
    public cube: Cube;

    public constructor (entryPoint: HTMLElement, cube: Cube) {
        this.entryPoint = entryPoint;
        this.entryPoint.innerHTML = `
<svg viewBox="0 0 70 70" fill="none" xmlns="http://www.w3.org/2000/svg">
<!-- Rows -->
<path class="row top left" d="M16.5442 2.36754C16.8164 1.55086 17.5807 1 18.4415 1H27C28.1046 1 29 1.89543 29 3V11C29 12.1046 28.1046 13 27 13H15.7749C14.4097 13 13.4458 11.6626 13.8775 10.3675L16.5442 2.36754Z" fill="#FFFF00"/>
<path class="row top middle" d="M29 3C29 1.89543 29.8954 1 31 1H39C40.1046 1 41 1.89543 41 3V11C41 12.1046 40.1046 13 39 13H31C29.8954 13 29 12.1046 29 11V3Z" fill="#DDDDDD"/>
<path class="row top right" d="M41 3C41 1.89543 41.8954 1 43 1H51.5585C52.4193 1 53.1836 1.55086 53.4558 2.36754L56.1225 10.3675C56.5542 11.6626 55.5903 13 54.2251 13H43C41.8954 13 41 12.1046 41 11V3Z" fill="#FFFF00"/>
<path class="row bottom left" d="M13.8775 59.6325C13.4458 58.3374 14.4097 57 15.7749 57H27C28.1046 57 29 57.8954 29 59V67C29 68.1046 28.1046 69 27 69H18.4415C17.5807 69 16.8164 68.4491 16.5442 67.6325L13.8775 59.6325Z" fill="#FFFF00"/>
<path class="row bottom middle" d="M29 59C29 57.8954 29.8954 57 31 57H39C40.1046 57 41 57.8954 41 59V67C41 68.1046 40.1046 69 39 69H31C29.8954 69 29 68.1046 29 67V59Z" fill="#DDDDDD"/>
<path class="row bottom right" d="M41 59C41 57.8954 41.8954 57 43 57H54.2251C55.5903 57 56.5542 58.3374 56.1225 59.6325L53.4558 67.6325C53.1836 68.4491 52.4193 69 51.5585 69H43C41.8954 69 41 68.1046 41 67V59Z" fill="#FFFF00"/>
<!-- Center top -->
<path class="center top left" d="M13 15C13 13.8954 13.8954 13 15 13H27C28.1046 13 29 13.8954 29 15V25C29 27.2091 27.2091 29 25 29H15C13.8954 29 13 28.1046 13 27V15Z" fill="#FF7F00"/>
<path class="center top middle" d="M29 15C29 13.8954 29.8954 13 31 13H39C40.1046 13 41 13.8954 41 15V27C41 28.1046 40.1046 29 39 29H31C29.8954 29 29 28.1046 29 27V15Z" fill="#DDDDDD"/>
<path class="center top right" d="M41 15C41 13.8954 41.8954 13 43 13H55C56.1046 13 57 13.8954 57 15V27C57 28.1046 56.1046 29 55 29H45C42.7909 29 41 27.2091 41 25V15Z" fill="#FF7F00"/>
<!-- Center middle -->
<path class="center middle left" d="M13 31C13 29.8954 13.8954 29 15 29H27C28.1046 29 29 29.8954 29 31V39C29 40.1046 28.1046 41 27 41H15C13.8954 41 13 40.1046 13 39V31Z" fill="#DDDDDD"/>
<path class="center middle origin" d="M29 31C29 29.8954 29.8954 29 31 29H39C40.1046 29 41 29.8954 41 31V39C41 40.1046 40.1046 41 39 41H31C29.8954 41 29 40.1046 29 39V31Z" fill="#DDDDDD"/>
<path class="center middle right" d="M41 31C41 29.8954 41.8954 29 43 29H55C56.1046 29 57 29.8954 57 31V39C57 40.1046 56.1046 41 55 41H43C41.8954 41 41 40.1046 41 39V31Z" fill="#DDDDDD"/>
<!-- Center bottom -->
<path class="center bottom left" d="M13 43C13 41.8954 13.8954 41 15 41H25C27.2091 41 29 42.7909 29 45V55C29 56.1046 28.1046 57 27 57H15C13.8954 57 13 56.1046 13 55V43Z" fill="#FF0000"/>
<path class="center bottom middle" d="M29 43C29 41.8954 29.8954 41 31 41H39C40.1046 41 41 41.8954 41 43V55C41 56.1046 40.1046 57 39 57H31C29.8954 57 29 56.1046 29 55V43Z" fill="#DDDDDD"/>
<path class="center bottom right" d="M41 45C41 42.7909 42.7909 41 45 41H55C56.1046 41 57 41.8954 57 43V55C57 56.1046 56.1046 57 55 57H43C41.8954 57 41 56.1046 41 55V45Z" fill="#FF0000"/>
<!-- Columns -->
<path class="column left top" d="M1 18.4415C1 17.5807 1.55086 16.8164 2.36754 16.5442L10.3675 13.8775C11.6626 13.4458 13 14.4097 13 15.7749V27C13 28.1046 12.1046 29 11 29H3C1.89543 29 1 28.1046 1 27V18.4415Z" fill="#00FF00"/>
<path class="column left middle" d="M1 31C1 29.8954 1.89543 29 3 29H11C12.1046 29 13 29.8954 13 31V39C13 40.1046 12.1046 41 11 41H3C1.89543 41 1 40.1046 1 39V31Z" fill="#DDDDDD"/>
<path class="column left bottom" d="M1 43C1 41.8954 1.89543 41 3 41H11C12.1046 41 13 41.8954 13 43V54.2251C13 55.5903 11.6626 56.5542 10.3675 56.1225L2.36754 53.4558C1.55086 53.1836 1 52.4193 1 51.5585V43Z" fill="#00FF00"/>
<path class="column right top" d="M57 15.7749C57 14.4097 58.3374 13.4458 59.6325 13.8775L67.6325 16.5442C68.4491 16.8164 69 17.5807 69 18.4415V27C69 28.1046 68.1046 29 67 29H59C57.8954 29 57 28.1046 57 27V15.7749Z" fill="#0000FF"/>
<path class="column right middle" d="M57 31C57 29.8954 57.8954 29 59 29H67C68.1046 29 69 29.8954 69 31V39C69 40.1046 68.1046 41 67 41H59C57.8954 41 57 40.1046 57 39V31Z" fill="#DDDDDD"/>
<path class="column right bottom" d="M57 43C57 41.8954 57.8954 41 59 41H67C68.1046 41 69 41.8954 69 43V51.5585C69 52.4193 68.4491 53.1836 67.6325 53.4558L59.6325 56.1225C58.3374 56.5542 57 55.5903 57 54.2251V43Z" fill="#0000FF"/>
<!-- Outlines -->
<path d="M68 51.5586V43C68 42.4823 67.6067 42.0562 67.1025 42.0049L67 42H59C58.4477 42 58 42.4477 58 43V54.2256C58.0003 54.9079 58.669 55.3896 59.3164 55.1738L67.3164 52.5068L67.4629 52.4453C67.7892 52.2751 68 51.9352 68 51.5586ZM70 51.5586C70 52.769 69.2738 53.8522 68.1738 54.3193L67.9482 54.4043L59.9482 57.0713C58.0059 57.7184 56.0003 56.2729 56 54.2256V43C56 41.3431 57.3431 40 59 40H67L67.1543 40.0039C68.7394 40.0842 70 41.3949 70 43V51.5586Z" fill="black"/>
<path d="M68 31C68 30.4823 67.6067 30.0562 67.1025 30.0049L67 30H59C58.4477 30 58 30.4477 58 31V39L58.0049 39.1025C58.0562 39.6067 58.4823 40 59 40H67C67.5523 40 68 39.5523 68 39V31ZM70 39C70 40.6569 68.6569 42 67 42H59C57.3949 42 56.0842 40.7394 56.0039 39.1543L56 39V31C56 29.3431 57.3431 28 59 28H67L67.1543 28.0039C68.7394 28.0842 70 29.3949 70 31V39Z" fill="black"/>
<path d="M54.2256 56C56.2091 56.0003 57.628 57.8829 57.126 59.7666L57.0713 59.9482L54.4043 67.9482C53.996 69.1732 52.8498 70 51.5586 70H43C41.3949 70 40.0842 68.7394 40.0039 67.1543L40 67V59C40 57.3431 41.3431 56 43 56H54.2256ZM42 67L42.0049 67.1025C42.0562 67.6067 42.4823 68 43 68H51.5586C51.9889 68 52.3707 67.7246 52.5068 67.3164L55.1738 59.3164L55.2061 59.1943C55.3282 58.5876 54.8651 58.0003 54.2256 58H43C42.4477 58 42 58.4477 42 59V67Z" fill="black"/>
<path d="M12 43C12 42.4823 11.6067 42.0562 11.1025 42.0049L11 42H3C2.44772 42 2 42.4477 2 43V51.5586C2.00005 51.9889 2.27543 52.3707 2.68359 52.5068L10.6836 55.1738L10.8057 55.2061C11.4124 55.3282 11.9997 54.8651 12 54.2256V43ZM14 54.2256C13.9997 56.2091 12.1171 57.628 10.2334 57.126L10.0518 57.0713L2.05176 54.4043C0.826767 53.996 4.7865e-05 52.8498 0 51.5586V43C1.28853e-07 41.3431 1.34315 40 3 40H11L11.1543 40.0039C12.7394 40.0842 14 41.3949 14 43V54.2256Z" fill="black"/>
<path d="M12 31C12 30.4823 11.6067 30.0562 11.1025 30.0049L11 30H3C2.44772 30 2 30.4477 2 31V39L2.00488 39.1025C2.05621 39.6067 2.48232 40 3 40H11C11.5523 40 12 39.5523 12 39V31ZM14 39C14 40.6569 12.6569 42 11 42H3C1.39489 42 0.0842144 40.7394 0.00390625 39.1543L0 39V31C1.28853e-07 29.3431 1.34315 28 3 28H11L11.1543 28.0039C12.7394 28.0842 14 29.3949 14 31V39Z" fill="black"/>
<path d="M12 15.7744C11.9997 15.1349 11.4124 14.6718 10.8057 14.7939L10.6836 14.8262L2.68359 17.4932C2.27543 17.6293 2.00005 18.0111 2 18.4414V27C2 27.5523 2.44772 28 3 28H11C11.5523 28 12 27.5523 12 27V15.7744ZM14 27C14 28.6569 12.6569 30 11 30H3C1.34315 30 3.22128e-08 28.6569 0 27V18.4414C4.79031e-05 17.1502 0.826767 16.004 2.05176 15.5957L10.0518 12.9287L10.2334 12.874C12.1171 12.372 13.9997 13.7909 14 15.7744V27Z" fill="black"/>
<path d="M51.5586 0C52.8498 4.79031e-05 53.996 0.826767 54.4043 2.05176L57.0713 10.0518C57.7184 11.9941 56.2729 13.9997 54.2256 14H43C41.3949 14 40.0842 12.7394 40.0039 11.1543L40 11V3C40 1.34315 41.3431 3.22128e-08 43 0H51.5586ZM42 11L42.0049 11.1025C42.0562 11.6067 42.4823 12 43 12H54.2256C54.8651 11.9997 55.3282 11.4124 55.2061 10.8057L55.1738 10.6836L52.5068 2.68359C52.3707 2.27543 51.9889 2.00005 51.5586 2H43C42.4477 2 42 2.44772 42 3V11Z" fill="black"/>
<path d="M40 59C40 58.4823 39.6067 58.0562 39.1025 58.0049L39 58H31C30.4477 58 30 58.4477 30 59V67L30.0049 67.1025C30.0562 67.6067 30.4823 68 31 68H39C39.5523 68 40 67.5523 40 67V59ZM42 67C42 68.6569 40.6569 70 39 70H31C29.3949 70 28.0842 68.7394 28.0039 67.1543L28 67V59C28 57.3431 29.3431 56 31 56H39L39.1543 56.0039C40.7394 56.0842 42 57.3949 42 59V67Z" fill="black"/>
<path d="M40 3C40 2.48232 39.6067 2.05621 39.1025 2.00488L39 2H31C30.4477 2 30 2.44772 30 3V11L30.0049 11.1025C30.0562 11.6067 30.4823 12 31 12H39C39.5523 12 40 11.5523 40 11V3ZM42 11C42 12.6569 40.6569 14 39 14H31C29.3949 14 28.0842 12.7394 28.0039 11.1543L28 11V3C28 1.34315 29.3431 3.22128e-08 31 0H39L39.1543 0.00390625C40.7394 0.0842145 42 1.39489 42 3V11Z" fill="black"/>
<path d="M28 59C28 58.4477 27.5523 58 27 58H15.7744C15.0921 58.0003 14.6104 58.669 14.8262 59.3164L17.4932 67.3164L17.5547 67.4629C17.7249 67.7892 18.0648 68 18.4414 68H27C27.5523 68 28 67.5523 28 67V59ZM30 67C30 68.6569 28.6569 70 27 70H18.4414C17.231 70 16.1478 69.2738 15.6807 68.1738L15.5957 67.9482L12.9287 59.9482C12.2816 58.0059 13.7271 56.0003 15.7744 56H27C28.6569 56 30 57.3431 30 59V67Z" fill="black"/>
<path d="M56 27V15.7744C56.0003 13.7271 58.0059 12.2816 59.9482 12.9287L67.9482 15.5957C69.1732 16.004 70 17.1502 70 18.4414V27C70 28.6569 68.6569 30 67 30H59C57.3431 30 56 28.6569 56 27ZM58 27C58 27.5523 58.4477 28 59 28H67C67.5523 28 68 27.5523 68 27V18.4414C68 18.0111 67.7246 17.6293 67.3164 17.4932L59.3164 14.8262C58.669 14.6104 58.0003 15.0921 58 15.7744V27Z" fill="black"/>
<path d="M56 43C56 42.4477 55.5523 42 55 42H45C43.3431 42 42 43.3431 42 45V55C42 55.5523 42.4477 56 43 56H55C55.5523 56 56 55.5523 56 55V43ZM58 55C58 56.6569 56.6569 58 55 58H43C41.3431 58 40 56.6569 40 55V45C40 42.2386 42.2386 40 45 40H55C56.6569 40 58 41.3431 58 43V55Z" fill="black"/>
<path d="M56 31C56 30.4477 55.5523 30 55 30H43C42.4477 30 42 30.4477 42 31V39L42.0049 39.1025C42.0562 39.6067 42.4823 40 43 40H55C55.5523 40 56 39.5523 56 39V31ZM58 39C58 40.6569 56.6569 42 55 42H43C41.3949 42 40.0842 40.7394 40.0039 39.1543L40 39V31C40 29.3431 41.3431 28 43 28H55C56.6569 28 58 29.3431 58 31V39Z" fill="black"/>
<path d="M56 15C56 14.4477 55.5523 14 55 14H43C42.4477 14 42 14.4477 42 15V25C42 26.6569 43.3431 28 45 28H55C55.5523 28 56 27.5523 56 27V15ZM58 27C58 28.6569 56.6569 30 55 30H45C42.2386 30 40 27.7614 40 25V15C40 13.3431 41.3431 12 43 12H55C56.6569 12 58 13.3431 58 15V27Z" fill="black"/>
<path d="M40 43C40 42.4823 39.6067 42.0562 39.1025 42.0049L39 42H31C30.4477 42 30 42.4477 30 43V55C30 55.5523 30.4477 56 31 56H39C39.5523 56 40 55.5523 40 55V43ZM42 55C42 56.6569 40.6569 58 39 58H31C29.3431 58 28 56.6569 28 55V43C28 41.3431 29.3431 40 31 40H39L39.1543 40.0039C40.7394 40.0842 42 41.3949 42 43V55Z" fill="black"/>
<path d="M40 31C40 30.4823 39.6067 30.0562 39.1025 30.0049L39 30H31C30.4477 30 30 30.4477 30 31V39L30.0049 39.1025C30.0562 39.6067 30.4823 40 31 40H39C39.5523 40 40 39.5523 40 39V31ZM42 39C42 40.6569 40.6569 42 39 42H31C29.3949 42 28.0842 40.7394 28.0039 39.1543L28 39V31C28 29.3431 29.3431 28 31 28H39L39.1543 28.0039C40.7394 28.0842 42 29.3949 42 31V39Z" fill="black"/>
<path d="M40 15C40 14.4823 39.6067 14.0562 39.1025 14.0049L39 14H31C30.4477 14 30 14.4477 30 15V27C30 27.5523 30.4477 28 31 28H39C39.5523 28 40 27.5523 40 27V15ZM42 27C42 28.6569 40.6569 30 39 30H31C29.3431 30 28 28.6569 28 27V15C28 13.3431 29.3431 12 31 12H39L39.1543 12.0039C40.7394 12.0842 42 13.3949 42 15V27Z" fill="black"/>
<path d="M12 55V43C12 41.3431 13.3431 40 15 40H25C27.7614 40 30 42.2386 30 45V55C30 56.6569 28.6569 58 27 58H15C13.3431 58 12 56.6569 12 55ZM14 55C14 55.5523 14.4477 56 15 56H27C27.5523 56 28 55.5523 28 55V45C28 43.3431 26.6569 42 25 42H15C14.4477 42 14 42.4477 14 43V55Z" fill="black"/>
<path d="M28 31C28 30.4477 27.5523 30 27 30H15C14.4477 30 14 30.4477 14 31V39L14.0049 39.1025C14.0562 39.6067 14.4823 40 15 40H27C27.5523 40 28 39.5523 28 39V31ZM30 39C30 40.6569 28.6569 42 27 42H15C13.3949 42 12.0842 40.7394 12.0039 39.1543L12 39V31C12 29.3431 13.3431 28 15 28H27C28.6569 28 30 29.3431 30 31V39Z" fill="black"/>
<path d="M28 25V15C28 14.4477 27.5523 14 27 14H15C14.4477 14 14 14.4477 14 15V27C14 27.5523 14.4477 28 15 28H25C26.6569 28 28 26.6569 28 25ZM30 25C30 27.7614 27.7614 30 25 30H15C13.3431 30 12 28.6569 12 27V15C12 13.3431 13.3431 12 15 12H27C28.6569 12 30 13.3431 30 15V25Z" fill="black"/>
<path d="M28 3C28 2.44772 27.5523 2 27 2H18.4414C18.0648 2.00004 17.7249 2.21081 17.5547 2.53711L17.4932 2.68359L14.8262 10.6836C14.6104 11.331 15.0921 11.9997 15.7744 12H27C27.5523 12 28 11.5523 28 11V3ZM30 11C30 12.6569 28.6569 14 27 14H15.7744C13.7271 13.9997 12.2816 11.9941 12.9287 10.0518L15.5957 2.05176L15.6807 1.82617C16.1478 0.726171 17.231 4.48701e-05 18.4414 0H27C28.6569 1.28853e-07 30 1.34315 30 3V11Z" fill="black"/>
</svg>
        `
        this.cube = cube;
    }

    private clear() : void {
        this.entryPoint.querySelectorAll("path").forEach(pathEl => {
            if (pathEl.getAttribute("class"))
                pathEl.style.fill = "var(--neutral-200, #ddd)";
        })
    }

    public render() : void {
        this.clear();
        // Render stickers in a 2D grid.
        const stickers = this.cube.getStickersFromMove("U");
        
        stickers.sort((a,b) => b.position[1] - a.position[1]) // Left to right of top face
        stickers.sort((a,b) => b.position[0] - a.position[0]) // Top to bottom of top face
        stickers.sort((a,b) => b.position[2] - a.position[2]) // Top to bottom of cube
        
        stickers.forEach((sticker, index) => {
            if (index < 9) {
                // Top side, is sorted in rows from left to right
                console.log("face", sticker.position); 
            }
            else if (index < 12) {
                // Top rows
                console.log("top", sticker.position); 

            }
            else if (index < 17) {
                // Columns, ordered in pairs (rows) from left to right
                console.log("columns", sticker.position); 

            } else {
                // Bottom rows
                console.log("bottom", sticker.position); 

            }

        })
        
    }



    
}